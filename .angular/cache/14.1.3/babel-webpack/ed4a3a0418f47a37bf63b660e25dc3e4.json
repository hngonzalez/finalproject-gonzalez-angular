{"ast":null,"code":"import { EditStudentComponent } from './../edit-student/edit-student.component';\nimport { ViewStudentCoursesModalComponent } from '../view-student-courses-modal/view-student-courses-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"./../../../core/auth/services/auth.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@ngrx/store\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\n\nfunction ListComponent_div_0_table_1_tr_14_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.idPerson, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_1_tr_14_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.name, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_1_tr_14_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.lastName, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_1_tr_14_td_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.email, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_1_tr_14_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 3)(1, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ListComponent_div_0_table_1_tr_14_td_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const person_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r14.openCourses(person_r4.idPerson));\n    });\n    i0.ɵɵtext(2, \" VER \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ListComponent_div_0_table_1_tr_14_td_5_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const person_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r17.editStudent(person_r4));\n    });\n    i0.ɵɵtext(4, \" Editar \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ListComponent_div_0_table_1_tr_14_td_5_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const person_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r19.deleteStudent(person_r4));\n    });\n    i0.ɵɵtext(6, \" Eliminar \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ListComponent_div_0_table_1_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, ListComponent_div_0_table_1_tr_14_td_1_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(2, ListComponent_div_0_table_1_tr_14_td_2_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(3, ListComponent_div_0_table_1_tr_14_td_3_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(4, ListComponent_div_0_table_1_tr_14_td_4_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(5, ListComponent_div_0_table_1_tr_14_td_5_Template, 7, 0, \"td\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r4.type == ctx_r3.filter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r4.type == ctx_r3.filter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r4.type == ctx_r3.filter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r4.type == ctx_r3.filter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r4.type == ctx_r3.filter);\n  }\n}\n\nfunction ListComponent_div_0_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Apellido\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 3);\n    i0.ɵɵtext(12, \"Acciones\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, ListComponent_div_0_table_1_tr_14_Template, 6, 5, \"tr\", 4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.dataPersonsList);\n  }\n}\n\nfunction ListComponent_div_0_table_2_tr_12_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r22 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r22.name, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_2_tr_12_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r22 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r22.lastName, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_2_tr_12_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const person_r22 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r22.email, \" \");\n  }\n}\n\nfunction ListComponent_div_0_table_2_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, ListComponent_div_0_table_2_tr_12_td_1_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(2, ListComponent_div_0_table_2_tr_12_td_2_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(3, ListComponent_div_0_table_2_tr_12_td_3_Template, 2, 1, \"td\", 2);\n    i0.ɵɵelementStart(4, \"td\")(5, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ListComponent_div_0_table_2_tr_12_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r30);\n      const person_r22 = restoredCtx.$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r29.openCourses(person_r22.idPerson));\n    });\n    i0.ɵɵtext(6, \" VER \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const person_r22 = ctx.$implicit;\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r22.type == ctx_r21.filter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r22.type == ctx_r21.filter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", person_r22.type == ctx_r21.filter);\n  }\n}\n\nfunction ListComponent_div_0_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Apellido\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Acciones\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, ListComponent_div_0_table_2_tr_12_Template, 7, 3, \"tr\", 4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.dataPersonsList);\n  }\n}\n\nfunction ListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, ListComponent_div_0_table_1_Template, 15, 1, \"table\", 2);\n    i0.ɵɵtemplate(2, ListComponent_div_0_table_2_Template, 13, 1, \"table\", 2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.curUser != \"user\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.curUser == \"user\");\n  }\n}\n\nexport let ListComponent = /*#__PURE__*/(() => {\n  class ListComponent {\n    constructor(_dataService, _dataAuth, dialog, store) {\n      this._dataService = _dataService;\n      this._dataAuth = _dataAuth;\n      this.dialog = dialog;\n      this.store = store;\n      this.confirmation = false;\n      this.displayedColumns = ['idPerson', 'name', 'lastName', 'email', 'curso', 'actions'];\n    }\n\n    ngOnInit() {\n      this.confirmation = false;\n      this.curUser = localStorage.getItem('type');\n      this.dataPersonsList$ = this._dataService.getStudents().subscribe(studentList => {\n        this.dataPersonsList = studentList;\n      }, error => {\n        console.log('no se pudo obtener el listado de personas');\n      });\n    }\n\n    ngOnDestroy() {\n      this.dataPersonsList$.unsubscribe();\n    }\n    /**\r\n     * Función para abrir el modal de cursos del estudiante seleccionado\r\n     * @param elementRow elemento a modificar\r\n     */\n\n\n    openCourses(elementRow) {\n      const dialogRef = this.dialog.open(ViewStudentCoursesModalComponent, {\n        width: '50%',\n        height: '80%',\n        data: {\n          elementRow\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {});\n    }\n    /**\r\n     * Función para editar estudiante\r\n     * @param elementRow elemento a modificar\r\n     */\n\n\n    editStudent(elementRow) {\n      const dialogRef = this.dialog.open(EditStudentComponent, {\n        width: '20%',\n        data: {\n          elementRow\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          let indexToUpdate = this.dataPersonsList.findIndex(studentAux => {\n            return studentAux.idPerson == result.idPerson;\n          });\n          this.dataPersonsList[indexToUpdate] = result;\n        }\n      });\n    }\n\n    deleteStudent(student) {\n      this._dataService.deleteStudent(student).subscribe(resp => {\n        let indexToDelete = this.dataPersonsList.findIndex(studentAux => {\n          return studentAux.idPerson == student.idPerson;\n        });\n        this.dataPersonsList.splice(indexToDelete, 1);\n      }, error => {\n        console.log(error);\n      });\n    }\n\n  }\n\n  ListComponent.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.Store));\n  };\n\n  ListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"app-list\"]],\n    inputs: {\n      filter: \"filter\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [4, \"ngIf\"], [1, \"actions\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"actions\", 4, \"ngIf\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-flat-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ListComponent_div_0_Template, 3, 2, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.dataPersonsList);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.MatButton],\n    styles: [\".container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}table[_ngcontent-%COMP%]{width:90%;text-align:center}.actions[_ngcontent-%COMP%]{width:30%}button[_ngcontent-%COMP%]{margin:0 10px}\"]\n  });\n  return ListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}