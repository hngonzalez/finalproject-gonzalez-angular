{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/features/services/data.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/select\";\nimport * as i6 from \"@angular/material/core\";\nimport * as i7 from \"@angular/forms\";\n\nfunction ViewStudentCoursesModalComponent_mat_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const course_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", course_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", course_r3.name, \" \");\n  }\n}\n\nfunction ViewStudentCoursesModalComponent_small_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"El curso ya se encuentra asignado al alumno\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewStudentCoursesModalComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const course_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", course_r4.name, \" \");\n  }\n}\n\nexport let ViewStudentCoursesModalComponent = /*#__PURE__*/(() => {\n  class ViewStudentCoursesModalComponent {\n    constructor(dialogRef, data, _dataService) {\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this._dataService = _dataService;\n      this.currentStudentCourses = [];\n      this.existCourse = false;\n    }\n\n    ngOnInit() {\n      this.getCourses();\n      this.getStudentCourses();\n    }\n\n    getCourses() {\n      this._dataService.getCourses().subscribe(coursesList => {\n        this.availableCourses = coursesList;\n      }, error => {});\n    }\n\n    getStudentCourses() {\n      this._dataService.getRelCoursePerson().subscribe(rel => {\n        rel.forEach(element => {\n          if (element.idPerson == this.data.elementRow) {\n            this._dataService.getDataCoursesByCourseId(element.idCourse).subscribe(resp => {\n              this.currentStudentCourses.push(resp);\n            }, error => {});\n          }\n        });\n      }, error => {});\n    }\n\n    onCourseChange() {\n      this.currentStudentCourses.forEach(element => {\n        if (element.idCourse == this.selectedCourse.idCourse) {\n          this.existCourse = true;\n        }\n      });\n\n      if (!this.existCourse) {\n        this._dataService.addNewCourseToStudent(this.selectedCourse.idCourse, this.data.elementRow).subscribe(resp => {\n          this._dataService.getDataCoursesByCourseId(resp.idCourse).subscribe(resp2 => {\n            this.currentStudentCourses.push(resp2);\n          }, error => {});\n        });\n      }\n    }\n\n  }\n\n  ViewStudentCoursesModalComponent.ɵfac = function ViewStudentCoursesModalComponent_Factory(t) {\n    return new (t || ViewStudentCoursesModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.DataService));\n  };\n\n  ViewStudentCoursesModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ViewStudentCoursesModalComponent,\n    selectors: [[\"app-view-student-courses-modal\"]],\n    decls: 10,\n    vars: 4,\n    consts: [[\"appearance\", \"fill\"], [3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function ViewStudentCoursesModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-form-field\", 0)(1, \"mat-label\");\n        i0.ɵɵtext(2, \"A\\u00F1adir a curso\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"mat-select\", 1);\n        i0.ɵɵlistener(\"ngModelChange\", function ViewStudentCoursesModalComponent_Template_mat_select_ngModelChange_3_listener($event) {\n          return ctx.selectedCourse = $event;\n        })(\"ngModelChange\", function ViewStudentCoursesModalComponent_Template_mat_select_ngModelChange_3_listener() {\n          return ctx.onCourseChange();\n        });\n        i0.ɵɵtemplate(4, ViewStudentCoursesModalComponent_mat_option_4_Template, 2, 2, \"mat-option\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(5, ViewStudentCoursesModalComponent_small_5_Template, 2, 0, \"small\", 3);\n        i0.ɵɵelementStart(6, \"div\")(7, \"h2\");\n        i0.ɵɵtext(8, \"Cursos actuales:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, ViewStudentCoursesModalComponent_div_9_Template, 3, 1, \"div\", 4);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedCourse);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.availableCourses);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.existCourse);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.currentStudentCourses);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.MatFormField, i4.MatLabel, i5.MatSelect, i6.MatOption, i7.NgControlStatus, i7.NgModel]\n  });\n  return ViewStudentCoursesModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}